# Python 基础知识总结

## 课程需安装和下载的程序：
- https://cursor.com/cn
- https://www.anaconda.com/download
- https://git-scm.com/install/
- https://unity.cn/
- https://vroid.com/

注意安装Anaconda的时候要勾选“Add Anaconda 3 to my PATH……”

![Anaconda 添加到 PATH 路径截图](Anaconda_PATH.png)

## 文件一：1_python_101.py

### 1. 变量赋值
- **知识点**：Python 中的变量赋值不需要声明类型
- **示例**：`name = "Tongzhou Yu"`、`x = "1"` 和 `y = "2"`
- **说明**：Python 是动态类型语言，变量类型由赋值的值决定

### 2. 字符串类型
- **知识点**：使用引号（单引号或双引号）创建字符串
- **示例**：`"1"` 和 `"2"` 都是字符串类型
- **说明**：字符串是 Python 中的基本数据类型之一

### 3. 字符串连接
- **知识点**：使用 `+` 运算符可以连接字符串
- **示例**：`x + y` 的结果是 `"12"`（字符串连接，不是数字相加）
- **说明**：当操作数是字符串时，`+` 执行字符串连接操作

### 4. 输出函数
- **知识点**：`print()` 是 Python 的内置函数，用于输出内容
- **示例**：`print(x+y)` 输出 `"12"`
- **说明**：`print()` 可以将表达式的结果打印到控制台

### 5. f-string 字符串格式化
- **知识点**：使用 `f"..."` 格式化字符串，可以在字符串中直接插入变量
- **示例**：`print(f"Hello, {name}!")` 输出 `"Hello, Tongzhou Yu!"`
- **说明**：
  - `f` 前缀表示这是一个格式化字符串
  - 使用 `{变量名}` 在字符串中插入变量值
  - 比传统的字符串拼接更简洁易读

## 文件二：2_glm_single_conversation.py

### 1. 模块导入
- **知识点**：使用 `import` 关键字导入外部模块
- **示例**：`import requests` 和 `import json`
- **说明**：Python 通过导入模块来使用第三方库或标准库的功能

### 2. 函数定义
- **知识点**：使用 `def` 关键字定义函数
- **示例**：`def call_zhipu_api(messages, model="glm-4-flash"):`
- **说明**：
  - 函数名遵循命名规范（小写字母+下划线）
  - 可以定义参数，支持默认参数值（`model="glm-4-flash"`）

### 3. 字典（Dictionary）
- **知识点**：字典是键值对的数据结构
- **示例**：
  ```python
  headers = {
      "Authorization": "...",
      "Content-Type": "application/json"
  }
  ```
- **说明**：字典用花括号 `{}` 定义，键值对用冒号 `:` 分隔

### 4. HTTP 请求
- **知识点**：使用 `requests` 库发送 HTTP POST 请求
- **示例**：`requests.post(url, headers=headers, json=data)`
- **说明**：
  - `requests` 是第三方库，需要先安装
  - `post()` 方法用于发送 POST 请求
  - 可以传递 URL、请求头和 JSON 数据

### 5. 条件语句（if-else）
- **知识点**：使用 `if-else` 进行条件判断
- **示例**：
  ```python
  if response.status_code == 200:
      return response.json()
  else:
      raise Exception(...)
  ```
- **说明**：
  - `if` 语句用于根据条件执行不同的代码块
  - `else` 处理条件不满足的情况
  - 使用 `==` 进行相等比较
  - 使用缩进表示代码块（Python 的特色）

### 6. 用户输入
- **知识点**：使用 `input()` 函数获取用户输入
- **示例**：`user_input = input("请输入你要说的话：")`
- **说明**：
  - `input()` 会暂停程序执行，等待用户输入
  - 用户输入的内容会作为字符串返回
  - 可以传入提示信息作为参数

### 7. 返回值
- **知识点**：使用 `return` 语句返回函数结果
- **示例**：`return response.json()`
- **说明**：函数可以通过 `return` 返回一个值，也可以返回多个值（元组）

### 8. 异常处理
- **知识点**：使用 `raise` 抛出异常
- **示例**：`raise Exception(f"API调用失败: {response.status_code}, {response.text}")`
- **说明**：
  - `raise` 用于主动抛出异常
  - `Exception` 是 Python 的基础异常类
  - f-string 格式化字符串（`f"..."`）用于在字符串中插入变量

### 9. 列表（List）
- **知识点**：列表是有序的元素集合
- **示例**：
  ```python
  messages = [
      {"role": "user", "content": "你好，请介绍一下自己"}
  ]
  ```
- **说明**：
  - 列表用方括号 `[]` 定义
  - 列表中可以包含字典等复杂数据结构
  - 列表是有序的，可以包含重复元素

### 10. 字典访问
- **知识点**：使用方括号 `[]` 访问字典的值
- **示例**：`result['choices'][0]['message']['content']`
- **说明**：
  - 通过键名访问字典的值
  - 可以嵌套访问多层字典
  - `[0]` 表示访问列表的第一个元素（索引从 0 开始）

### 11. 函数调用
- **知识点**：通过函数名和参数调用函数
- **示例**：`call_zhipu_api(messages)`
- **说明**：调用函数时传递参数，函数执行后返回结果

## 文件三：3_glm_multiple_conversations.py

### 1. while 循环
- **知识点**：`while` 循环用于重复执行代码，直到条件不满足
- **示例**：`while True:`
- **说明**：
  - `while True:` 表示无限循环（条件永远为真）
  - 必须配合 `break` 语句才能退出循环
  - 适用于不知道要重复多少次，只知道停止条件的场景
  - **类比**：就像餐厅服务员一直问"还需要什么吗？"，直到你说"不用了"

### 2. break 语句
- **知识点**：`break` 用于跳出循环
- **示例**：
  ```python
  if user_input in ['再见']:
      break
  ```
- **说明**：
  - `break` 会立即终止当前循环
  - 在 `while True:` 循环中必须有退出机制，否则会无限循环
  - 执行 `break` 后，程序会继续执行循环后面的代码

### 3. 条件判断（if）
- **知识点**：使用 `if` 进行条件判断
- **示例**：`if user_input in ['再见']:`
- **说明**：
  - `if` 语句用于根据条件执行不同的代码块
  - 使用缩进表示代码块
  - **类比**：就像岔路口，根据条件选择不同的路径

### 4. 成员运算符（in）
- **知识点**：`in` 运算符用于检查元素是否在序列中
- **示例**：`user_input in ['再见']`
- **说明**：
  - 检查 `user_input` 是否在列表 `['再见']` 中
  - 返回 `True` 或 `False`
  - 可以检查字符串、列表、字典等数据结构

### 5. 控制流组合使用
- **知识点**：`while`、`if`、`break` 组合实现程序流程控制
- **示例**：
  ```python
  while True:
      user_input = input("...")
      if user_input in ['再见']:
          break
      # 其他代码...
  ```
- **说明**：
  - 这是典型的"循环+条件退出"模式
  - 适用于需要持续运行直到用户主动退出的程序
  - 如聊天机器人、游戏循环等场景

## 文件四：4_glm_self_reflection.py

### 1. 函数定义和文档字符串
- **知识点**：使用 `def` 定义函数，使用三引号添加文档说明
- **示例**：
  ```python
  def self_reflection_conversation(user_input):
      """
      自省机制：三步流程
      1. 用户问题 → LLM1 → 初始回答
      2. 初始回答 → LLM2（反思） → 反思结果
      3. 初始回答 + 反思结果 → LLM1（总结） → 最终输出
      """
  ```
- **说明**：
  - 三引号 `"""..."""` 用于多行字符串和文档字符串
  - 文档字符串用于说明函数的功能和使用方法
  - 可以通过 `函数名.__doc__` 访问文档字符串

### 2. 多行字符串
- **知识点**：使用三引号创建多行字符串
- **示例**：
  ```python
  reflection_prompt = f"""请对以下回答进行深入反思...
  用户问题：{user_input}
  AI的回答：{initial_response}
  """
  ```
- **说明**：
  - 三引号可以跨越多行，保留换行符
  - 可以配合 f-string 使用，插入变量
  - 适合编写长文本、提示词等

### 3. 字符串乘法
- **知识点**：字符串可以与整数相乘，实现重复
- **示例**：`"=" * 50` 生成 50 个等号
- **说明**：
  - 用于生成分隔线、重复字符等
  - 结果是一个新的字符串

### 4. 函数返回值
- **知识点**：使用 `return` 返回函数结果
- **示例**：`return final_response`
- **说明**：
  - 函数执行到 `return` 时会立即返回
  - 返回值可以被其他代码使用
  - 可以返回任何类型的值（字符串、数字、列表、字典等）

### 5. 多步骤流程设计
- **知识点**：通过函数组织复杂的多步骤流程
- **示例**：三步自省机制（初始回答 → 反思 → 总结）
- **说明**：
  - 将复杂流程封装在函数中，提高代码可读性
  - 每个步骤都有明确的功能
  - 便于测试和维护

## 总结

这些文件涵盖了 Python 的基础知识：

### 基础概念
- **变量赋值**：无需声明类型，动态类型语言
- **数据类型**：字符串、字典、列表
- **运算符**：`+`（字符串连接）、`==`（相等比较）、`in`（成员检查）、`*`（字符串重复）
- **输入输出**：`print()` 输出、`input()` 输入

### 控制流：让程序"思考"和"重复"

#### 条件判断 (Conditional Statements)
- **`if-elif-else`**：就像一个岔路口，让程序根据不同的条件选择不同的执行路径
- **逻辑**：
  - `if`（如果）条件为 `True`，执行这里的代码
  - `elif`（否则如果）前面的条件不满足，但这个条件满足，执行这里的代码
  - `else`（否则）以上所有条件都不满足，执行这里的代码

#### 循环 (Loops)
- **`for` 循环**：*遍历*一个集合中的每个元素。当你明确知道要重复多少次时使用
- **`while` 循环**：*当*某个条件为 `True` 时，就一直重复。当你不知道要重复多少次，只知道停止的条件时使用
- **`break` 语句**：跳出循环，终止循环执行
- **`continue` 语句**：跳过本次循环的剩余部分，继续下一次循环

### 函数和模块
- **函数定义**：`def` 关键字定义函数
- **函数调用**：通过函数名和参数调用函数
- **函数返回值**：`return` 返回结果
- **模块导入**：`import` 导入外部模块和库

### 高级特性
- **异常处理**：`raise` 抛出异常、`try-except` 捕获异常
- **数据结构操作**：字典、列表的创建和访问
- **字符串格式化**：f-string（`f"..."`）在字符串中插入变量
- **多行字符串**：三引号 `"""..."""` 创建多行文本
- **第三方库**：`requests` 库发送 HTTP 请求

### Python 特色
- **缩进表示代码块**：不使用大括号，用缩进表示代码层次
- **动态类型**：无需声明变量类型
- **简洁语法**：f-string、列表推导式等让代码更简洁
- **丰富的内置功能**：大量内置函数和标准库

## Git 基础操作与与 Cursor 同步流程

### 一、Git 基础及常用命令

#### 1. Git 简介
Git 是一个分布式版本控制系统，适合多人协作开发，能够跟踪文件的变更历史，回退版本，方便协作与管理。

#### 2. 配置用户名和邮箱

Git 需要配置用户名（user.name）和邮箱（user.email）以标记每次提交者的信息。

```bash
git config --global user.name "你的名字"
git config --global user.email "你的邮箱@example.com"
```
- `--global` 表示全局配置（对当前用户所有仓库生效）。

#### 3. 初始化本地仓库

```bash
git init
```
- 在当前目录初始化一个新的本地 Git 仓库。

#### 4. 添加文件到暂存区

```bash
git add 文件名
# 或添加所有更改
git add .
```

#### 5. 提交更改

```bash
git commit -m "提交说明"
```
- `-m` 后面是本次提交的信息。

#### 6. 查看状态与历史

```bash
git status    # 查看当前工作区和暂存区状态
git log       # 查看提交历史
```

#### 7. 远程仓库操作

##### 添加远程仓库（如 Cursor 云端）

```bash
git remote add origin 仓库地址
```

##### 拉取远程更新（先同步云端最新代码）

```bash
git pull origin main
```

##### 推送本地代码到远程

```bash
git push origin main
```

### 二、使用 Cursor 与 Git 同步代码的典型流程

以云端团队协作为例，建议操作顺序如下：

1. **拉取最新云端代码（避免冲突）**
   ```bash
   git pull origin main
   ```

2. **编辑本地代码、保存修改**

3. **查看状态，添加需要提交的文件**
   ```bash
   git status
   git add 文件名
   ```

4. **提交到本地仓库**
   ```bash
   git commit -m "描述你的更改"
   ```

5. **推送到远程云端（与 Cursor 或代码托管平台同步）**
   ```bash
   git push origin main
   ```

6. **如遇冲突，按照提示解决，并重复 add/commit/push**

---

### 常见问题与建议

- 每次推送前，**先 pull**，再 push。
- 只需配置一次 user.name 和 user.email。
- 推荐使用 `.gitignore` 忽略不需要同步的文件（如虚拟环境、日志等）。
- 可在 Cursor 编辑器内集成终端直接运行上述 Git 命令。

